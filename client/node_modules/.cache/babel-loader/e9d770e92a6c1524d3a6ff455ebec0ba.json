{"ast":null,"code":"var _jsxFileName = \"D:\\\\ipfs\\\\cluster-webui\\\\client\\\\src\\\\components\\\\PinDetailPopup.tsx\",\n    _s = $RefreshSig$();\n\nimport ExpandMoreIcon from '@mui/icons-material/ExpandMore';\nimport { Accordion, AccordionDetails, AccordionSummary, Dialog, DialogContent, DialogTitle, Skeleton, Stack, Typography } from '@mui/material';\nimport { useEffect, useState } from 'react';\nimport { useApi } from '../context/ApiContext';\nimport { useLoading } from '../hooks/UseLoading';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const PinDetailPopup = props => {\n  _s();\n\n  var _status$peer_map;\n\n  const [expanded, setExpanded] = useState(false);\n  const [status, setStatus] = useState();\n  const [isLoading, load] = useLoading();\n  const api = useApi();\n\n  const handleChange = panel => (event, isExpanded) => {\n    setExpanded(isExpanded ? panel : false);\n  };\n\n  const reload = () => {\n    props.cid && load(api.status(props.cid)).then(setStatus).catch(console.error);\n  }; //eslint-disable-next-line react-hooks/exhaustive-deps\n\n\n  useEffect(reload, [props.cid]);\n\n  const getStatusColor = peer => peer.error !== '' ? 'red' : peer.status === 'pinned' ? 'green' : 'blue';\n\n  return /*#__PURE__*/_jsxDEV(Dialog, {\n    open: !!props.cid,\n    onClose: props.onClose,\n    children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n      children: \"Pin Details\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 3\n    }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n      children: isLoading ? /*#__PURE__*/_jsxDEV(Stack, {\n        spacing: 1,\n        children: /*#__PURE__*/_jsxDEV(Skeleton, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 4\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 31\n      }, this) : Object.entries((_status$peer_map = status === null || status === void 0 ? void 0 : status.peer_map) !== null && _status$peer_map !== void 0 ? _status$peer_map : {}).map((_ref, k) => {\n        let [id, peer] = _ref;\n        return /*#__PURE__*/_jsxDEV(Accordion, {\n          expanded: expanded === id,\n          onChange: handleChange(id),\n          children: [/*#__PURE__*/_jsxDEV(AccordionSummary, {\n            expandIcon: /*#__PURE__*/_jsxDEV(ExpandMoreIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 55,\n              columnNumber: 18\n            }, this),\n            children: /*#__PURE__*/_jsxDEV(Typography, {\n              color: getStatusColor(peer),\n              children: peer.peername\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 57,\n              columnNumber: 6\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 54,\n            columnNumber: 5\n          }, this), /*#__PURE__*/_jsxDEV(AccordionDetails, {\n            children: /*#__PURE__*/_jsxDEV(\"table\", {\n              children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"ID\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 62,\n                  columnNumber: 8\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: id\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 63,\n                  columnNumber: 8\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 61,\n                columnNumber: 7\n              }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Status\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 66,\n                  columnNumber: 8\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: peer.status\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 67,\n                  columnNumber: 8\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 65,\n                columnNumber: 7\n              }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Priority\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 70,\n                  columnNumber: 8\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: peer.priority_pin.toString()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 71,\n                  columnNumber: 8\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 69,\n                columnNumber: 7\n              }, this), peer.error !== '' && /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n                  style: {\n                    color: 'red'\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Error\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 75,\n                    columnNumber: 33\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: peer.error\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 76,\n                    columnNumber: 33\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 74,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Attempts\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 79,\n                    columnNumber: 33\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: peer.attempt_count\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 80,\n                    columnNumber: 33\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 78,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Timestamp\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 83,\n                    columnNumber: 33\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: peer.timestamp\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 84,\n                    columnNumber: 33\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 82,\n                  columnNumber: 29\n                }, this)]\n              }, void 0, true)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 60,\n              columnNumber: 6\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 5\n          }, this)]\n        }, k, true, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 51\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 3\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 9\n  }, this);\n};\n\n_s(PinDetailPopup, \"htP5KAesRvY/cKhYsqKU4wNGF3I=\", false, function () {\n  return [useLoading, useApi];\n});\n\n_c = PinDetailPopup;\n\nvar _c;\n\n$RefreshReg$(_c, \"PinDetailPopup\");","map":{"version":3,"sources":["D:/ipfs/cluster-webui/client/src/components/PinDetailPopup.tsx"],"names":["ExpandMoreIcon","Accordion","AccordionDetails","AccordionSummary","Dialog","DialogContent","DialogTitle","Skeleton","Stack","Typography","useEffect","useState","useApi","useLoading","PinDetailPopup","props","expanded","setExpanded","status","setStatus","isLoading","load","api","handleChange","panel","event","isExpanded","reload","cid","then","catch","console","error","getStatusColor","peer","onClose","Object","entries","peer_map","map","k","id","peername","priority_pin","toString","color","attempt_count","timestamp"],"mappings":"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","sourcesContent":["import ExpandMoreIcon from '@mui/icons-material/ExpandMore';\r\nimport {\r\n\tAccordion,\r\n\tAccordionDetails,\r\n\tAccordionSummary,\r\n\tDialog,\r\n\tDialogContent,\r\n\tDialogTitle,\r\n\tSkeleton,\r\n\tStack,\r\n\tTypography,\r\n} from '@mui/material';\r\nimport {SyntheticEvent, useEffect, useState} from 'react';\r\nimport {useApi} from '../context/ApiContext';\r\nimport {useLoading} from '../hooks/UseLoading';\r\n\r\nexport const PinDetailPopup = (props: { cid?: string, onClose?: () => void }) => {\r\n\tconst [expanded, setExpanded] = useState<string | false>(false);\r\n\tconst [status, setStatus] = useState<any>();\r\n\tconst [isLoading, load] = useLoading();\r\n\tconst api = useApi();\r\n\r\n\tconst handleChange = (panel: string) => (event: SyntheticEvent, isExpanded: boolean) => {\r\n\t\tsetExpanded(isExpanded ? panel : false);\r\n\t};\r\n\r\n\tconst reload = () => {\r\n\t\tprops.cid && load(api.status(props.cid))\r\n\t\t\t.then(setStatus)\r\n\t\t\t.catch(console.error);\r\n\t};\r\n\r\n\t//eslint-disable-next-line react-hooks/exhaustive-deps\r\n\tuseEffect(reload, [props.cid]);\r\n\r\n\tconst getStatusColor = (peer: any): string => peer.error !== '' ? 'red' :\r\n\t\tpeer.status === 'pinned' ? 'green' :\r\n\t\t\t'blue';\r\n\r\n\treturn <Dialog\r\n\t\topen={!!props.cid}\r\n\t\tonClose={props.onClose}\r\n\t>\r\n\t\t<DialogTitle>Pin Details</DialogTitle>\r\n\t\t<DialogContent>{isLoading ? <Stack spacing={1}>\r\n\t\t\t<Skeleton>\r\n\r\n\t\t\t</Skeleton>\r\n\t\t</Stack> : Object.entries(status?.peer_map ?? {})\r\n\t\t\t.map(([id, peer]: [string, any], k: number) => <Accordion\r\n\t\t\t\tkey={k}\r\n\t\t\t\texpanded={expanded === id}\r\n\t\t\t\tonChange={handleChange(id)}>\r\n\t\t\t\t<AccordionSummary\r\n\t\t\t\t\texpandIcon={<ExpandMoreIcon/>}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Typography color={getStatusColor(peer)}>{peer.peername}</Typography>\r\n\t\t\t\t</AccordionSummary>\r\n\t\t\t\t<AccordionDetails>\r\n\t\t\t\t\t<table>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<th>ID</th>\r\n\t\t\t\t\t\t\t<td>{id}</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<th>Status</th>\r\n\t\t\t\t\t\t\t<td>{peer.status}</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<th>Priority</th>\r\n\t\t\t\t\t\t\t<td>{peer.priority_pin.toString()}</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t{peer.error !== '' && <>\r\n                            <tr style={{color: 'red'}}>\r\n                                <th>Error</th>\r\n                                <td>{peer.error}</td>\r\n                            </tr>\r\n                            <tr>\r\n                                <th>Attempts</th>\r\n                                <td>{peer.attempt_count}</td>\r\n                            </tr>\r\n                            <tr>\r\n                                <th>Timestamp</th>\r\n                                <td>{peer.timestamp}</td>\r\n                            </tr>\r\n                        </>}\r\n\t\t\t\t\t</table>\r\n\t\t\t\t</AccordionDetails>\r\n\t\t\t</Accordion>)}\r\n\t\t</DialogContent>\r\n\t</Dialog>;\r\n};\r\n"]},"metadata":{},"sourceType":"module"}